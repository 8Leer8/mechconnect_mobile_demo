<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rate Service - MechConnect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/index.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Geist Sans', 'system-ui', 'sans-serif'],
                    },
                    fontSize: {
                        'xs': ['0.75rem', { lineHeight: '1rem' }],
                        'sm': ['0.875rem', { lineHeight: '1.25rem' }],
                        'base': ['1rem', { lineHeight: '1.5rem' }],
                        'lg': ['1.125rem', { lineHeight: '1.75rem' }],
                    },
                    colors: {
                        orange: {
                            500: '#f97316',
                            600: '#ea580c',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .review-card {
            transition: all 0.3s ease;
        }
        
        .star-rating {
            transition: all 0.2s ease;
        }
        
        .star-rating:hover {
            transform: scale(1.1);
        }
        
        .star-filled {
            color: #fbbf24;
        }
        
        .star-empty {
            color: #d1d5db;
        }
        
        .submit-btn {
            transition: all 0.3s ease;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.3);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-10">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Back Button -->
                <button onclick="window.history.back()" class="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-all duration-200 group">
                    <span class="material-icons-round text-lg group-hover:-translate-x-0.5 transition-transform">arrow_back</span>
                    <span class="text-sm font-medium hidden sm:inline">Back</span>
                </button>
                
                <!-- Page Title -->
                <div class="flex items-center gap-3">
                    <h1 class="text-lg font-semibold text-gray-900">Rate Service</h1>
                </div>
                
                <!-- Placeholder for alignment -->
                <div class="w-10"></div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-2xl mx-auto px-4 py-6">
        <!-- Service Info Card -->
        <div class="review-card bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
            <div class="flex items-start gap-4">
                <div class="w-16 h-16 bg-orange-100 rounded-xl flex items-center justify-center flex-shrink-0">
                    <span class="material-icons-round text-orange-500 text-2xl">build</span>
                </div>
                <div class="flex-1">
                    <h2 class="text-xl font-bold text-gray-900 mb-1">Brake Pad Replacement</h2>
                    <div class="text-sm text-gray-600 mb-2">Completed on Jan 16, 2024</div>
                    <div class="flex items-center gap-2 text-sm text-gray-700">
                        <span class="material-icons-round text-base text-gray-400">handyman</span>
                        <span>Mike Rodriguez</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Review Form -->
        <div class="review-card bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-900 mb-6 text-center">How was your service?</h2>
            
            <!-- Overall Rating -->
            <div class="mb-8">
                <label class="block text-sm font-medium text-gray-700 mb-4 text-center">Overall Rating</label>
                <div class="flex justify-center space-x-2 mb-2" id="star-rating">
                    <!-- Stars will be generated by JavaScript -->
                </div>
                <div class="text-center">
                    <span id="rating-text" class="text-sm text-gray-500">Tap to rate</span>
                </div>
            </div>

            <!-- Comments -->
            <div class="mb-6">
                <label for="comments" class="block text-sm font-medium text-gray-700 mb-3">Your Review (Optional)</label>
                <textarea 
                    id="comments" 
                    rows="5" 
                    placeholder="Share your experience with this service. What did you like? Any suggestions for improvement?"
                    class="w-full px-4 py-3 border border-gray-300 rounded-xl text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none transition resize-none"
                ></textarea>
                <div class="text-xs text-gray-500 mt-2">Your review helps other customers and improves our service</div>
            </div>

            <!-- Submit Button -->
            <button 
                id="submit-review" 
                onclick="submitReview()"
                class="submit-btn w-full bg-orange-500 text-white px-6 py-4 rounded-xl text-base font-medium hover:bg-orange-600 transition-colors flex items-center justify-center gap-3 shadow-md disabled:opacity-50 disabled:cursor-not-allowed"
                disabled
            >
                <span class="material-icons-round text-lg">star</span>
                <span class="font-semibold">Submit Review</span>
            </button>
        </div>

        <!-- Review Guidelines -->
        <div class="mt-6 bg-blue-50 rounded-xl border border-blue-200 p-4">
            <div class="flex items-start gap-3">
                <span class="material-icons-round text-blue-500 mt-0.5">info</span>
                <div class="text-sm text-blue-700">
                    <div class="font-medium mb-1">Review Guidelines</div>
                    <ul class="list-disc list-inside space-y-1 text-xs">
                        <li>Be honest and specific about your experience</li>
                        <li>Focus on the service quality and mechanic's work</li>
                        <li>Your review will be visible to other customers</li>
                        <li>You can edit your review within 24 hours</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 max-w-sm w-full mx-4 text-center">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <span class="material-icons-round text-green-500 text-3xl">check_circle</span>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Review Submitted!</h3>
            <p class="text-sm text-gray-600 mb-6">Thank you for sharing your experience. Your feedback helps us improve.</p>
            <button
                onclick="closeModal()"
                class="w-full bg-orange-500 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors"
            >
                Done
            </button>
        </div>
    </div>

    <script>
        let currentRating = 0;
        const ratingTexts = {
            0: "Tap to rate",
            1: "Poor",
            2: "Fair", 
            3: "Good",
            4: "Very Good",
            5: "Excellent"
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize star rating
            initStarRating();
            
            // Add validation for form
            document.getElementById('comments').addEventListener('input', validateForm);
        });

        function initStarRating() {
            const starContainer = document.getElementById('star-rating');
            
            // Create 5 stars
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('span');
                star.className = 'star-rating star-empty material-icons-round text-4xl cursor-pointer';
                star.textContent = 'star';
                star.dataset.rating = i;
                
                star.addEventListener('click', function() {
                    setRating(parseInt(this.dataset.rating));
                });
                
                star.addEventListener('mouseover', function() {
                    highlightStars(parseInt(this.dataset.rating));
                });
                
                starContainer.appendChild(star);
            }
            
            // Reset stars when mouse leaves container
            starContainer.addEventListener('mouseleave', function() {
                highlightStars(currentRating);
            });
        }

        function setRating(rating) {
            currentRating = rating;
            highlightStars(rating);
            updateRatingText(rating);
            validateForm();
        }

        function highlightStars(rating) {
            const stars = document.querySelectorAll('.star-rating');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.remove('star-empty');
                    star.classList.add('star-filled');
                } else {
                    star.classList.remove('star-filled');
                    star.classList.add('star-empty');
                }
            });
        }

        function updateRatingText(rating) {
            document.getElementById('rating-text').textContent = ratingTexts[rating];
        }

        function validateForm() {
            const submitButton = document.getElementById('submit-review');
            submitButton.disabled = currentRating === 0;
        }

        function submitReview() {
            if (currentRating === 0) {
                showMessage('Please select a rating', 'error');
                return;
            }
            
            // Show loading state
            const submitButton = document.getElementById('submit-review');
            const originalText = submitButton.innerHTML;
            submitButton.innerHTML = '<span class="material-icons-round animate-spin">refresh</span><span>Submitting...</span>';
            submitButton.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Show success modal
                document.getElementById('success-modal').classList.remove('hidden');
                
                // Reset button
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
            }, 1500);
        }

        function closeModal() {
            document.getElementById('success-modal').classList.add('hidden');
            // Redirect back or to another page
            window.history.back();
        }

        function showMessage(message, type) {
            const messageEl = document.createElement("div");
            messageEl.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${
                type === "success"
                    ? "bg-green-500 text-white"
                    : "bg-red-500 text-white"
            }`;
            messageEl.innerHTML = `<div class="flex items-center gap-2"><span class="material-icons-round">${
                type === "success" ? "check_circle" : "error"
            }</span> ${message}</div>`;
            document.body.appendChild(messageEl);

            setTimeout(() => {
                messageEl.remove();
            }, 3000);
        }
    </script>
</body>
</html>