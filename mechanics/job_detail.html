<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Job Detail — MechConnect</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/geist-sans@5.0.1/index.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <script>
    tailwind.config = { theme: { extend: { fontFamily: { sans:['Geist Sans','system-ui','sans-serif'] } } } }
  </script>
</head>
<body class="bg-gray-50 min-h-screen font-sans pb-28">
  <header class="bg-white border-b sticky top-0 z-20">
    <div class="max-w-xl mx-auto px-4 py-3 flex items-center justify-between">
      <button onclick="history.back()" class="p-2"><span class="material-icons-round">arrow_back</span></button>
      <h1 class="text-lg font-semibold">Job</h1>
      <div class="flex items-center gap-2">
  <a href="notification.html" class="p-2"><span class="material-icons-round">notifications</span></a>
        <div class="w-2"></div>
      </div>
    </div>
  </header>

  <main class="max-w-2xl mx-auto px-4 pt-6">
    <section class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
      <div class="flex items-center justify-between mb-2">
        <div class="flex items-center gap-4">
          <img src="../client_lak/client/imgs/client_default_1.png" alt="avatar" class="w-14 h-14 rounded-full object-cover bg-gray-100">
          <div>
            <div class="text-lg font-semibold">John Doe</div>
            <div class="text-xs text-gray-500">Engine Diagnostics</div>
          </div>
        </div>
        <span class="bg-red-500 text-white text-xs px-3 py-1 rounded-full">high priority</span>
      </div>

      <div class="mt-2">
        <div class="font-semibold">Service Description</div>
        <div class="text-sm text-gray-600 mt-1">Check engine light is on, car making strange noises</div>
      </div>

      <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="space-y-2">
          <div class="flex items-center gap-2 text-sm">
            <span class="material-icons-round text-gray-400">calendar_today</span> 2025-01-08
          </div>
          <div class="flex items-center gap-2 text-sm">
            <span class="material-icons-round text-gray-400">schedule</span> 2:00 PM
          </div>
          <div class="flex items-center gap-2 text-sm">
            <span class="material-icons-round text-gray-400">place</span> 123 Main St, Quezon City (2.3 km)
          </div>
        </div>
        <div class="space-y-2">
          <div class="flex items-center gap-2 text-sm">
            <span class="material-icons-round text-gray-400">call</span>
            <span class="text-gray-400 italic">Accept to view contact</span>
          </div>
          <div class="flex items-center gap-2 text-sm">
            <span class="material-icons-round text-gray-400">email</span>
            <span class="text-gray-400 italic">Accept to view email</span>
          </div>
          <div class="flex items-center gap-2 text-sm">
            <span class="text-gray-500">Estimated Payment:</span> <span class="text-orange-600 font-bold">₱900</span>
          </div>
        </div>
      </div>

      <!-- Images section -->
      <div class="mt-6">
        <div class="font-semibold mb-2">Client Images</div>
        <div class="flex gap-3">
          <img src="../client_lak/client/imgs/service_default_1.png" alt="service" class="w-20 h-20 object-cover rounded-lg border">
          <img src="../client_lak/client/imgs/service_default_2.png" alt="service" class="w-20 h-20 object-cover rounded-lg border">
        </div>
      </div>

      <!-- Static map section -->
      <div class="mt-6">
        <div class="font-semibold mb-2">Location Map</div>
        <img src="../client_lak/client/imgs/static_map_sample.png" alt="map" class="w-full h-40 object-cover rounded-lg border">
      </div>

      <!-- Actions -->
      <div class="mt-8 flex gap-4">
        <button id="accept-btn" class="flex-1 bg-orange-500 text-white py-3 rounded-lg font-semibold text-base">Accept Booking</button>
        <button class="flex-1 bg-white border border-gray-200 py-3 rounded-lg font-semibold text-base" onclick="showMessage('Declined booking (prototype)','info')">Decline</button>
      </div>
    </section>

    <!-- Accept Modal -->
    <div id="accept-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/30 hidden">
      <div class="bg-white rounded-2xl shadow-xl max-w-md w-full p-6 relative animate-fade-in">
        <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700"><span class="material-icons-round">close</span></button>
        <div class="text-xl font-bold mb-1">Accept Booking</div>
        <div class="text-sm text-gray-500 mb-4">Please review the booking details before accepting</div>
        <div class="flex items-center gap-3 mb-3">
          <img src="../client_lak/client/imgs/client_default_1.png" alt="avatar" class="w-10 h-10 rounded-full object-cover bg-gray-100">
          <div>
            <div class="font-semibold">John Doe</div>
            <div class="text-xs text-gray-500">Engine Diagnostics</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-2 mb-2 text-sm">
          <div class="text-gray-500">Date & Time:</div>
          <div class="font-medium">2025-01-08 at 2:00 PM</div>
          <div class="text-gray-500">Location:</div>
          <div class="font-medium">123 Main St, Quezon City</div>
          <div class="text-gray-500">Distance:</div>
          <div class="font-medium">2.3 km</div>
          <div class="text-gray-500">Payment:</div>
          <div class="font-medium text-orange-600">₱900</div>
        </div>
        <div class="bg-blue-50 rounded-xl p-4 mb-3">
          <div class="flex items-center gap-2 mb-2">
            <span class="material-icons-round text-blue-500">account_balance_wallet</span>
            <span class="font-semibold text-blue-700">Token Required</span>
          </div>
          <div class="grid grid-cols-2 gap-2 text-sm">
            <div class="text-gray-500">Token Cost:</div>
            <div class="font-medium">1 token</div>
            <div class="text-gray-500">Your Balance:</div>
            <div class="font-medium">2450 tokens</div>
            <div class="text-gray-500">After Accepting:</div>
            <div class="font-medium">2449 tokens</div>
          </div>
        </div>
        <div class="bg-green-50 rounded-xl p-3 mb-4 flex items-center gap-2 text-green-700 text-sm">
          <span class="material-icons-round">check_circle</span>
          <span>By accepting, you commit to providing the service at the scheduled time.</span>
        </div>
        <div class="flex gap-3 mt-2">
          <button onclick="closeModal()" class="flex-1 bg-white border border-gray-200 py-2 rounded-lg font-semibold">Cancel</button>
          <button onclick="acceptBooking()" class="flex-1 bg-orange-500 text-white py-2 rounded-lg font-semibold">Accept &amp; Use 1 Token</button>
        </div>
      </div>
    </div>
    </section>
  </main>
  <script>
    // Modal logic
    function openModal() {
      document.getElementById('accept-modal').classList.remove('hidden');
    }
    function closeModal() {
      document.getElementById('accept-modal').classList.add('hidden');
    }
    function acceptBooking() {
  closeModal();
  window.location.href = 'start_service.html';
    }
    document.getElementById('accept-btn').onclick = openModal;
  </script>

  <!-- Bottom Navigation -->
  <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-2 px-4">
    <div class="max-w-xl mx-auto flex items-center justify-between">
      <a href="dashboard.html" class="mc-nav-btn flex flex-col items-center text-gray-600 hover:text-orange-500 transition-colors" data-nav="dashboard">
        <span class="material-icons-round text-lg">dashboard</span>
        <span class="text-xs mt-1">Dashboard</span>
      </a>
      <a href="bookings.html" class="mc-nav-btn flex flex-col items-center text-orange-500 transition-colors" data-nav="bookings">
        <span class="material-icons-round text-lg">calendar_today</span>
        <span class="text-xs mt-1">Bookings</span>
      </a>
      <a href="tokens.html" class="mc-nav-btn flex flex-col items-center text-gray-600 hover:text-orange-500 transition-colors" data-nav="tokens">
        <span class="material-icons-round text-lg">account_balance_wallet</span>
        <span class="text-xs mt-1">Tokens</span>
      </a>
      <a href="profile.html" class="mc-nav-btn flex flex-col items-center text-gray-600 hover:text-orange-500 transition-colors" data-nav="profile">
        <span class="material-icons-round text-lg">person</span>
        <span class="text-xs mt-1">Profile</span>
      </a>
      <a href="settings.html" class="mc-nav-btn flex flex-col items-center text-gray-600 hover:text-orange-500 transition-colors" data-nav="settings">
        <span class="material-icons-round text-lg">settings</span>
        <span class="text-xs mt-1">Settings</span>
      </a>
    </div>
  </nav>

  <script src="assets/js/helpers.js"></script>
  <script>
    setActiveNav('bookings');

    const jobs = {
      1: { name: 'Flat Tire', booker: 'Jonas', distance: '2.4 km', time: '12m ago', price: '₱450', desc: 'Change tire and check lug nuts.' },
      2: { name: 'Battery Replacement', booker: 'Ana', distance: '5.1 km', time: '40m ago', price: '₱1,200', desc: 'Replace battered battery and test charging.' },
      3: { name: 'Oil Change', booker: 'Ralph', distance: '1.2 km', time: '2h ago', price: '₱650', desc: 'Routine oil & filter change.' }
    };

    function queryParam(name){
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    const id = queryParam('id');
    const job = jobs[id] || { name: 'Unknown job', booker: '-', distance: '-', time: '-', price: '-', desc: '' };

    const el = document.getElementById('job');
    el.innerHTML = `
      <div class="text-lg font-semibold">${job.name}</div>
      <div class="text-xs text-gray-500 mt-1">${job.booker} • ${job.distance} • ${job.time}</div>
      <div class="mt-3 text-sm">${job.desc}</div>
      <div class="mt-4 flex items-center justify-between">
        <div class="text-sm font-medium">${job.price}</div>
        <div class="flex gap-2">
          <button onclick="showMessage('Open chat with ${job.booker}')" class="py-2 px-3 rounded-lg border">Chat</button>
          <button onclick="showMessage('Navigate to job workflow')" class="py-2 px-3 rounded-lg bg-orange-500 text-white">Start Job</button>
        </div>
      </div>
    `;
  </script>
</body>
</html>
